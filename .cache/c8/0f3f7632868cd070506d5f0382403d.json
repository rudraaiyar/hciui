{"id":"node_modules/breakpoint/breakpoint.js","dependencies":[{"name":"/Users/rudraaiyar/Documents/hciui/package.json","includedInParent":true,"mtime":1541009997000},{"name":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/package.json","includedInParent":true,"mtime":1541009977000},{"name":"optimist","loc":{"line":8,"column":19},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/Users/rudraaiyar/Documents/hciui/node_modules/optimist/index.js"},{"name":"fs","loc":{"line":9,"column":17},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/usr/local/lib/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"./config/config.defaults.js","loc":{"line":10,"column":21},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/config/config.defaults.js"},{"name":"http-proxy","loc":{"line":11,"column":24},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/Users/rudraaiyar/Documents/hciui/node_modules/http-proxy/lib/node-http-proxy.js"},{"name":"prompt","loc":{"line":60,"column":23},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/Users/rudraaiyar/Documents/hciui/node_modules/prompt/lib/prompt.js"},{"name":"os","loc":{"line":82,"column":18},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/usr/local/lib/node_modules/parcel-bundler/node_modules/os-browserify/browser.js"},{"name":"./server/server.js","loc":{"line":96,"column":22},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/server/server.js"},{"name":"./server/debug-file-server.js","loc":{"line":120,"column":32},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/server/debug-file-server.js"},{"name":"./server/rewriter-server.js","loc":{"line":125,"column":31},"parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/server/rewriter-server.js"},{"name":"process","parent":"/Users/rudraaiyar/Documents/hciui/node_modules/breakpoint/breakpoint.js","resolved":"/usr/local/lib/node_modules/parcel-bundler/node_modules/process/browser.js"}],"generated":{"js":"var process = require(\"process\");\n'use strict'; \r\n\r\nif (process.argv.length<3) {\r\n\tconsole.log(\"Usage:\\n      breakpoint -h hostIP -d htdocsDir -r passbyRule\\n\");\r\n\tconsole.log(\"eg: breakpoint -h 10.1.1.1 -d e:\\\\test\\\\haha\\\\ -r cgi-bin \\n\");\r\n}\r\n\r\nvar argv = require('optimist').argv;\r\nvar fs = require('fs');\r\nvar config = require('./config/config.defaults.js'); \r\nvar httpProxy = require('http-proxy');\r\n\r\nif (argv['h'])         { config.serverHost        = argv['h']; }\r\nif (argv['host'])      { config.serverHost        = argv['host']; }\r\n\r\nif (argv['p'])         { config.serverPort        = argv['p']; }\r\nif (argv['port'])      { config.serverPort        = argv['port']; }\r\n\r\nif (argv['d'])         { config.fileServerBaseDir = argv['d']; }\r\nif (argv['file-dir'])  { config.fileServerBaseDir = argv['file-dir']; }\r\n\r\nif (argv['file-port']) { config.fileServerPort    = argv['file-port']; }\r\n\r\nif (argv['o'])\t\t   { config.outputDir = argv['o']; }\r\n\r\nif (argv['r'])\t  { config.passRule = argv['r']; }\r\n\r\nif (argv['v'])\t\t   { config.verbose = true; }\r\n\r\nif (argv['white-list']){ config.whiteList = argv['white-list'].split(','); }\r\n\r\ntry {\r\n    /* Makes sure the path exists and gets rid of any trailing slashes. */\r\n    config.fileServerBaseDir = fs.realpathSync(config.fileServerBaseDir);\r\n} catch (e) {\r\n    console.error(e.message);\r\n    process.exit(1);\r\n}\r\n\r\nArray.prototype.equals = function (otherArray) {\r\n\treturn !(this < otherArray || otherArray < this);\r\n}\r\n\r\nvar ips = scanAvailableIPs();\r\n\r\nif (config.serverHost && ips.indexOf(config.serverHost) < 0) {\r\n\tconsole.error('Configured host', config.serverHost, 'is not valid. You don\\'t have that IP');\r\n\tconsole.error('Available IPs are:', ips);\r\n\tprocess.exit(1);\r\n}\r\n\r\nif (!config.serverHost) {\r\n\r\n\tif (ips.length > 1) {\r\n\t\tconsole.log(\"Cannot decide which IP to use, please specify one of these\");\r\n\t\tips.forEach(function(ip, i) {\r\n\t\t\tconsole.log('[', i + 1, ']:', ip);\r\n\t\t})\r\n\r\n\t\tvar prompt = require('prompt');\r\n\t\tprompt.start();\r\n\t\ttry{\r\n\t\t\tprompt.get({name: 'selection', validator: /^\\d{1}$/, empty: false}, function(err, result) {\r\n\t\t\t\tvar ip = ips[result.selection - 1];\r\n\t\t\t\tconsole.log('Choosen option', ip);\r\n\t\t\t\tconfig.serverHost = ip;\r\n\t\t\t\tstartApp();\r\n\t\t\t})\r\n\t\t}catch(e){\r\n\t\t\tconsole.error(e);\r\n\t\t\tprocess.exit(1);\r\n\t\t}\r\n\t} else {\r\n\t\tconfig.serverHost = ips[0];\r\n\t\tstartApp();\r\n\t}\r\n} else {\r\n\tstartApp();\r\n}\r\n\r\nfunction scanAvailableIPs() {\r\n\tvar os = require('os');\r\n\tvar interfaces = os.networkInterfaces(),\r\n\t\tips = [];\r\n\tfor (var dev in interfaces) {\r\n\t\tinterfaces[dev].forEach(function(details){\r\n\t\t\tif (details.family == 'IPv4' && details.address != '127.0.0.1') {\r\n\t\t\t\tips.push(details.address);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn ips;\r\n}\r\n\r\nfunction startApp() {\r\n\tvar server = require('./server/server.js');\r\n\tserver.run();\r\n\r\n\t//used for reverse proxy\r\n\thttpProxy.createServer(function (req, res, proxy) {\r\n\t \r\n\t  var reg = new RegExp(config.passRule);\r\n\t  var host = '';\r\n\t  var port = 0;\r\n\t  if (config.passRule && reg.test(req.url)){ \r\n\t  \t\thost = req.headers.host;\r\n\t  \t\tport = 80;\r\n\t  }else{\r\n\t  \t\thost = config.serverHost;\r\n\t  \t\tport = config.fileServerPort;\r\n\t  }\r\n\r\n\t  proxy.proxyRequest(req, res, {\r\n\t  \thost: host,\r\n\t    port: port\r\n\t  });\r\n\t}).listen(80); \r\n\r\n\tif (config.runDebugServer) {\r\n\t\tvar debugFileServer = require('./server/debug-file-server.js');\r\n\t\tdebugFileServer.run();\r\n\t}\r\n\r\n\tif (config.runOfflineRewriter) {\r\n\t\tvar rewriterServer = require('./server/rewriter-server.js');\r\n\t\trewriterServer.run();\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","map":{"mappings":[{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":2,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":3,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":4,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":5,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":6,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":7,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":8,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":9,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":10,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":11,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":12,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":13,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":14,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":15,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":16,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":17,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":18,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":19,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":20,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":21,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":22,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":23,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":24,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":25,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":26,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":27,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":28,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":29,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":30,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":31,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":32,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":33,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":34,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":35,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":36,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":37,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":38,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":39,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":40,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":41,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":42,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":43,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":44,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":45,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":46,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":47,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":48,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":49,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":50,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":51,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":52,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":53,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":54,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":55,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":56,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":57,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":58,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":59,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":60,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":61,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":62,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":63,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":64,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":65,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":66,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":67,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":68,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":69,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":70,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":71,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":72,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":73,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":74,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":75,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":76,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":77,"column":0},"generated":{"line":78,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":78,"column":0},"generated":{"line":79,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":79,"column":0},"generated":{"line":80,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":80,"column":0},"generated":{"line":81,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":81,"column":0},"generated":{"line":82,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":82,"column":0},"generated":{"line":83,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":83,"column":0},"generated":{"line":84,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":84,"column":0},"generated":{"line":85,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":85,"column":0},"generated":{"line":86,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":86,"column":0},"generated":{"line":87,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":87,"column":0},"generated":{"line":88,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":88,"column":0},"generated":{"line":89,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":89,"column":0},"generated":{"line":90,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":90,"column":0},"generated":{"line":91,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":91,"column":0},"generated":{"line":92,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":92,"column":0},"generated":{"line":93,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":93,"column":0},"generated":{"line":94,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":94,"column":0},"generated":{"line":95,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":95,"column":0},"generated":{"line":96,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":96,"column":0},"generated":{"line":97,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":97,"column":0},"generated":{"line":98,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":98,"column":0},"generated":{"line":99,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":99,"column":0},"generated":{"line":100,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":100,"column":0},"generated":{"line":101,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":101,"column":0},"generated":{"line":102,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":102,"column":0},"generated":{"line":103,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":103,"column":0},"generated":{"line":104,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":104,"column":0},"generated":{"line":105,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":105,"column":0},"generated":{"line":106,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":106,"column":0},"generated":{"line":107,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":107,"column":0},"generated":{"line":108,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":108,"column":0},"generated":{"line":109,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":109,"column":0},"generated":{"line":110,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":110,"column":0},"generated":{"line":111,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":111,"column":0},"generated":{"line":112,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":112,"column":0},"generated":{"line":113,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":113,"column":0},"generated":{"line":114,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":114,"column":0},"generated":{"line":115,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":115,"column":0},"generated":{"line":116,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":116,"column":0},"generated":{"line":117,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":117,"column":0},"generated":{"line":118,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":118,"column":0},"generated":{"line":119,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":119,"column":0},"generated":{"line":120,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":120,"column":0},"generated":{"line":121,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":121,"column":0},"generated":{"line":122,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":122,"column":0},"generated":{"line":123,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":123,"column":0},"generated":{"line":124,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":124,"column":0},"generated":{"line":125,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":125,"column":0},"generated":{"line":126,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":126,"column":0},"generated":{"line":127,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":127,"column":0},"generated":{"line":128,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":128,"column":0},"generated":{"line":129,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":129,"column":0},"generated":{"line":130,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":130,"column":0},"generated":{"line":131,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":131,"column":0},"generated":{"line":132,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":132,"column":0},"generated":{"line":133,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":133,"column":0},"generated":{"line":134,"column":0}},{"source":"node_modules/breakpoint/breakpoint.js","original":{"line":134,"column":0},"generated":{"line":135,"column":0}}],"sources":{"node_modules/breakpoint/breakpoint.js":"'use strict'; \r\n\r\nif (process.argv.length<3) {\r\n\tconsole.log(\"Usage:\\n      breakpoint -h hostIP -d htdocsDir -r passbyRule\\n\");\r\n\tconsole.log(\"eg: breakpoint -h 10.1.1.1 -d e:\\\\test\\\\haha\\\\ -r cgi-bin \\n\");\r\n}\r\n\r\nvar argv = require('optimist').argv;\r\nvar fs = require('fs');\r\nvar config = require('./config/config.defaults.js'); \r\nvar httpProxy = require('http-proxy');\r\n\r\nif (argv['h'])         { config.serverHost        = argv['h']; }\r\nif (argv['host'])      { config.serverHost        = argv['host']; }\r\n\r\nif (argv['p'])         { config.serverPort        = argv['p']; }\r\nif (argv['port'])      { config.serverPort        = argv['port']; }\r\n\r\nif (argv['d'])         { config.fileServerBaseDir = argv['d']; }\r\nif (argv['file-dir'])  { config.fileServerBaseDir = argv['file-dir']; }\r\n\r\nif (argv['file-port']) { config.fileServerPort    = argv['file-port']; }\r\n\r\nif (argv['o'])\t\t   { config.outputDir = argv['o']; }\r\n\r\nif (argv['r'])\t  { config.passRule = argv['r']; }\r\n\r\nif (argv['v'])\t\t   { config.verbose = true; }\r\n\r\nif (argv['white-list']){ config.whiteList = argv['white-list'].split(','); }\r\n\r\ntry {\r\n    /* Makes sure the path exists and gets rid of any trailing slashes. */\r\n    config.fileServerBaseDir = fs.realpathSync(config.fileServerBaseDir);\r\n} catch (e) {\r\n    console.error(e.message);\r\n    process.exit(1);\r\n}\r\n\r\nArray.prototype.equals = function (otherArray) {\r\n\treturn !(this < otherArray || otherArray < this);\r\n}\r\n\r\nvar ips = scanAvailableIPs();\r\n\r\nif (config.serverHost && ips.indexOf(config.serverHost) < 0) {\r\n\tconsole.error('Configured host', config.serverHost, 'is not valid. You don\\'t have that IP');\r\n\tconsole.error('Available IPs are:', ips);\r\n\tprocess.exit(1);\r\n}\r\n\r\nif (!config.serverHost) {\r\n\r\n\tif (ips.length > 1) {\r\n\t\tconsole.log(\"Cannot decide which IP to use, please specify one of these\");\r\n\t\tips.forEach(function(ip, i) {\r\n\t\t\tconsole.log('[', i + 1, ']:', ip);\r\n\t\t})\r\n\r\n\t\tvar prompt = require('prompt');\r\n\t\tprompt.start();\r\n\t\ttry{\r\n\t\t\tprompt.get({name: 'selection', validator: /^\\d{1}$/, empty: false}, function(err, result) {\r\n\t\t\t\tvar ip = ips[result.selection - 1];\r\n\t\t\t\tconsole.log('Choosen option', ip);\r\n\t\t\t\tconfig.serverHost = ip;\r\n\t\t\t\tstartApp();\r\n\t\t\t})\r\n\t\t}catch(e){\r\n\t\t\tconsole.error(e);\r\n\t\t\tprocess.exit(1);\r\n\t\t}\r\n\t} else {\r\n\t\tconfig.serverHost = ips[0];\r\n\t\tstartApp();\r\n\t}\r\n} else {\r\n\tstartApp();\r\n}\r\n\r\nfunction scanAvailableIPs() {\r\n\tvar os = require('os');\r\n\tvar interfaces = os.networkInterfaces(),\r\n\t\tips = [];\r\n\tfor (var dev in interfaces) {\r\n\t\tinterfaces[dev].forEach(function(details){\r\n\t\t\tif (details.family == 'IPv4' && details.address != '127.0.0.1') {\r\n\t\t\t\tips.push(details.address);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn ips;\r\n}\r\n\r\nfunction startApp() {\r\n\tvar server = require('./server/server.js');\r\n\tserver.run();\r\n\r\n\t//used for reverse proxy\r\n\thttpProxy.createServer(function (req, res, proxy) {\r\n\t \r\n\t  var reg = new RegExp(config.passRule);\r\n\t  var host = '';\r\n\t  var port = 0;\r\n\t  if (config.passRule && reg.test(req.url)){ \r\n\t  \t\thost = req.headers.host;\r\n\t  \t\tport = 80;\r\n\t  }else{\r\n\t  \t\thost = config.serverHost;\r\n\t  \t\tport = config.fileServerPort;\r\n\t  }\r\n\r\n\t  proxy.proxyRequest(req, res, {\r\n\t  \thost: host,\r\n\t    port: port\r\n\t  });\r\n\t}).listen(80); \r\n\r\n\tif (config.runDebugServer) {\r\n\t\tvar debugFileServer = require('./server/debug-file-server.js');\r\n\t\tdebugFileServer.run();\r\n\t}\r\n\r\n\tif (config.runOfflineRewriter) {\r\n\t\tvar rewriterServer = require('./server/rewriter-server.js');\r\n\t\trewriterServer.run();\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"},"lineCount":135}},"hash":"050a21e7018447379d70098156e6cd85","cacheData":{"env":{}}}